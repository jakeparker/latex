% Notes:
%   -  `\mathrel`  :  relation
%   -  `\mathbin`  :  binary operation
%   -  `\mathop`   :  unary operation
%   -  `\mathord`  :  var
%   -   always wrap a call to `\mathlarger` or `\mathsmaller` with one of the above
%
%   -  `\lbrack` := `[`       `\rbrack` := `]`
%   -  `\lparen` := `(`       `\rparen` := `)`
%   -  `\lbrace` := `\{`      `\rbrace` := `\}`
%   -    ...     :=  ...         ...    :=  ...
%
%   -  `\bm` preserves spacing
%   -  `\mathlarger`  and  `\mathsmaller`  do *not* preserve spacing
%   -  `\bm{\left<}`  works,    `\left\bm{<}`  does not work
%
%   -  `\DeclarePairedDelimiter{cmd}{leftdelim}{rightdelim}`
%   -  `\DeclarePairedDelimiterX{cmd}[args]{leftdelim}{rightdelim}{body}`
%   -  `\DeclarePairedDelimiterXPP{cmd}[args]{precode}{leftdelim}{rightdelim}{postcode}{body}`
%
%   -  `\bm{ \sqrt{\mbox{\unboldmath$xyz$}} }`
%   -  `\bm{ \unboldmath{xyz}} }`
%   -  `\bm{\sqrtsign}{xyz}`
%
%   -  `\bm{\mathord{\mathlarger{\left(\right.}}} #1  \bm{\mathord{\mathlarger{\left.\right)}}}`

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                       math operators & commands                       %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
%  General
%
%\newcommand{\part}[1]{\vspace{.10in}{\bf (#1)}}
\newcommand{\justif}[2]{&{#1}&\text{#2}}
\newcommand{\justifyy}[2]{&{#1}&#2}
\newcommand{\indentitem}{\setlength\itemindent{23mm}\setlength\hangindent{26mm}}

% after git-pull, not sure which version worked with my other local code,
% so added this comment as a reminer, if something goes wrong when/if i recompile something
%   \newcommand{\question}[2]{\vspace{.25in} \hrule\vspace{0.5em}
%   \noindent{{\normalfont\large\bfseries#1:}\quad #2} \vspace{0.5em}
\newcommand{\question}[1]{\vspace{.25in} \hrule\vspace{0.5em}
\noindent{{\normalfont\large\bfseries#1:}} \vspace{0.5em}
\hrule \vspace{.10in}}

\newcommand{\questionn}[2]{\hrule%
\vspace{-0.5\baselineskip}\noindent{{\normalfont\large\bfseries#1:}}\vspace{0.5\baselineskip}\ \\ \noindent{#2} \vspace{0.25em}%
\hrule \vspace{.10in}}
\newcommand{\solution}{\textbf{\normalsize\ Solution}}

% \newcommand{\sectionheading}[1]{%
%   \noindent
%   \makebox[0pt][l]{\rule[-.2\baselineskip]{\linewidth}{.5mm}}%
%   \textbf{#1}\par\nobreak
% }

% \noindent\makebox[\linewidth]{\rule{\linewidth}{0.5pt}}
\newcommand{\horizontal}[1][\medskipamount]{%
  \par
  \vspace*{\dimexpr-\parskip-\baselineskip+#1}
  \noindent\makebox[\linewidth]{\rule{\linewidth}{0.5pt}}\par
  \vspace*{\dimexpr-\parskip-.5\baselineskip+#1}
}%

%
%  Basics
%
\DeclarePairedDelimiter{\parens}{\lparen}{\rparen}
\DeclarePairedDelimiter{\braces}{\lbrace}{\rbrace}
\DeclarePairedDelimiter{\bracks}{\lbrack}{\rbrack}
\DeclarePairedDelimiter{\verts}{\lvert}{\rvert}
\DeclarePairedDelimiter{\dverts}{\lVert}{\rVert}
\DeclarePairedDelimiter{\angles}{\langle}{\rangle}
\DeclarePairedDelimiter{\ceils}{\lceil}{\rceil}
\DeclarePairedDelimiter{\floors}{\lfloor}{\rfloor}
\DeclarePairedDelimiterX{\tuples}[2]{\lparen}{\rparen}{#1,\,#2}
\newcommand{\abs}[1]{\verts*{#1}}

\DeclarePairedDelimiterXPP{\Parens}[1]{\bm\begingroup}{\mathlarger{(}}{\mathlarger{)}}{\endgroup}{\mbox{\unboldmath{$#1$}}}
\DeclarePairedDelimiterXPP{\Braces}[1]{\bm\begingroup}{\mathlarger{\lbrace}}{\mathlarger{\rbrace}}{\endgroup}{\mbox{\unboldmath{$#1$}}}
\DeclarePairedDelimiterXPP{\Bracks}[1]{\bm\begingroup}{\mathlarger{[}}{\mathlarger{]}}{\endgroup}{\mbox{\unboldmath{$#1$}}}
\DeclarePairedDelimiterXPP{\Verts}[1]{\bm\begingroup}{\mathlarger{\lvert}}{\mathlarger{\rvert}}{\endgroup}{\mbox{\unboldmath{$#1$}}}
\DeclarePairedDelimiterXPP{\Dverts}[1]{\bm\begingroup}{\mathlarger{\lVert}}{\mathlarger{\rVert}}{\endgroup}{\mbox{\unboldmath{$#1$}}}
\DeclarePairedDelimiterXPP{\Angles}[1]{\bm\begingroup}{\mathlarger{\langle}}{\mathlarger{\rangle}}{\endgroup}{\mbox{\unboldmath{$#1$}}}
\DeclarePairedDelimiterXPP{\Ceils}[1]{\bm\begingroup}{\mathlarger{\lceil}}{\mathlarger{\rceil}}{\endgroup}{\mbox{\unboldmath{$#1$}}}
\DeclarePairedDelimiterXPP{\Floors}[1]{\bm\begingroup}{\mathlarger{\lfloor}}{\mathlarger{\rfloor}}{\endgroup}{\mbox{\unboldmath{$#1$}}}
\DeclarePairedDelimiterXPP{\Tuples}[2]{\bm\begingroup}{\mathlarger{(}}{\mathlarger{)}}{\endgroup}{\mbox{\unboldmath{$#1,\,#2$}}}
\newcommand{\Abs}[1]{\Verts*{#1}}


%
%  Logic
%
\newcommand{\st}{\mathrel{\mathsf{s}\centerdot\mathsf{t}\centerdot}}
\newcommand{\suchthat}{\bm{\mathrel{\mathlarger{\colon}}}}
\newcommand{\then}{\bm{\mathord{\mathlarger{,}}}\ }
\newcommand{\given}{\bm{\mathord{\mathlarger{\left. \middle\vert \right.}}}}
\newcommand{\by}{\bm{\mathord{\mathlarger{;}}}\ }
\newcommand{\as}{\bm{\mathrel{\mathlarger{\sim}}}}
\newcommand{\eq}{{=}} % {\mathord{\mathsmaller{=}}}
%\newcommand{\and}{\vee} % \vee
%\newcommand{\or}{\wedge} % \wedge
%\newcommand{\not}{\neg}


%
%  Sets
%
%\DeclareMathOperator*{\setunion}{\cup} % TODO
%\DeclareMathOperator*{\setintersection}{\cap} % TODO
%\DeclareMathOperator*{\setdifference}{\mathlarger{\setminus}} % TODO
\DeclareMathOperator{\powerset}{\mathcal{P}}

% TODO Set TODO
\newcommand{\Set}[1]{\bm{\mathord{\mathlarger{\mleft\lbrace\vphantom{#1}\mright.}}} \!#1\! \bm{\mathord{\mathlarger{\mleft.\vphantom{#1}\mright\rbrace}}}}

%\newcommandx{\SetUnion}[2]{} % TODO
%\newcommandx{\SetIntersection}[2]{} % TODO
%\newcommandx{\SetDifference}[2]{} % TODO
\newcommand{\PowerSet}[1]{\powerset\parens*{#1}}
\newcommand{\Card}[1]{\verts*{#1}} % cardinality
\newcommand{\Interval}[1]{\bm{\mathord{\mathlarger{\mleft\lbrack\vphantom{#1}\mright.}}} \!#1\! \bm{\mathord{\mathlarger{\mleft.\vphantom{#1}\mright\rbrack}}}}


%
%  Indicator Variables / Events
%
\DeclareMathOperator{\zero}{\mathds{0}}
\DeclareMathOperator{\one}{\mathds{1}}
\newcommand{\indicator}[1]{\mathbbm{#1}}


%
%  Functions
%
\DeclareMathOperator{\inverse}{^{-1}}
\newcommand{\Inverse}[1]{{#1}\inverse}
\newcommand{\f}{\operatorname{f}}
\newcommand{\g}{\operatorname{g}}
\newcommand{\of}{\circ}

% \newcommandx{\f}[2][1=f]{\operatorname{#1} \parens*{#2}}
% \newcommandx{\g}[2][1=g]{\operatorname{#1} \parens*{#2}}
% \newcommandx{\of}[3][1=f, 3=g]{\operatorname{\parens*{#3 \circ #1}} \parens*{#2}}

\newcommandx{\Inj}[1][1=r]{% % TODO (find better symbol)
  \begin{switch}{#1}
    \caseof{l}{\hookleftarrow}
    \caseof{r}{\hookrightarrow}
    \caseof{b}{\hookleftrightarrow}
  \end{switch}
}
\newcommandx{\Surj}[1][1=r]{% % TODO (find better symbol)
  \begin{switch}{#1}
    \caseof{l}{\leftarrowtriangle} % {req: stmaryrd}
    \caseof{r}{\rightarrowtriangle} % {req: stmaryrd}
    \caseof{b}{\leftrightarrowtriangle} % {req: stmaryrd}
  \end{switch}
}
\newcommand{\Bij}{\leftrightarrow} % TODO (find better symbol)


%
%  Combinatorics
%
\newcommand{\perm}[1]{#1!}
\newcommand{\kperm}[3]{% % TODO (change to \newcommandx{}... )
  \begin{switch}{#1}
    \caseof{rep}{\frac{#2!}{#2^{#3}\ \parens*{#2-#3}!}}
    \caseof{norep}{\frac{#2!}{\parens*{#2-#3}!}}
    \caseof{}{#2^{#3}}
  \end{switch}
}
% \newcommand{\kperm}[2]{\frac{#1!}{(#1-#2)!}}
\newcommand{\kselect}[2]{\frac{#1!}{#2!\ \parens*{#1-#2}!}}
\renewcommand{\choose}[2]{\binom{#1}{#2}}


%
%  Number Theory
%
\renewcommand{\natural}{\mathbbm{N}} % what is the default \natural symbol used for?
\newcommand{\whole}{\natural_{0}}
\newcommand{\integer}{\mathbbm{Z}}
\newcommand{\rational}{\mathbbm{Q}}
\newcommand{\irrational}{\rational^{\prime}}
\newcommand{\real}{\mathbbm{R}}
\newcommand{\complex}{\mathbbm{C}}



%
%  Algorithms
%
\newcommand{\Alg}[1]{\textsc{\bfseries \footnotesize #1}}


%
%  Asymptotic Analysis
%
\DeclareMathOperator{\bigo}{\mathcal{O}}
\DeclareMathOperator{\bigomega}{\Omega}
\DeclareMathOperator{\bigtheta}{\Theta}

\newcommand{\BigO}[1]{\bigo \parens*{#1}}
\newcommand{\BigOmega}[1]{\bigomega \parens*{#1}}
\newcommand{\BigTheta}[1]{\bigtheta \parens*{#1}}

\newcommandx{\AsymptoticBound}[2][1=upper]{%
  \begin{switch}{#1}% bound: {upper, lower, both}
    \caseof{upper}{\BigO{#2}}
    \caseof{lower}{\BigOmega{#2}}
    \caseof{both}{\BigTheta{#2}}
  \end{switch}
}

%
%  Matrices
%
\newcommand*{\vertbar}{\rule[-1ex]{0.5pt}{2.5ex}}
\newcommand*{\horzbar}{\rule[.5ex]{2.5ex}{0.5pt}}


%
%  Linear Algebra
%
\DeclareMathOperator{\spans}{\mathrm{span}}
\DeclareMathOperator{\nullity}{\mathrm{nullity}}
\DeclareMathOperator{\rank}{\mathrm{rank}}
\DeclareMathOperator{\nullspace}{\mathrm{nullspace}}
\DeclareMathOperator{\colspace}{\mathrm{colspace}}
\DeclareMathOperator{\rowspace}{\mathrm{rowspace}}
\DeclareMathOperator{\range}{\mathrm{range}}
\DeclareMathOperator{\trace}{\mathrm{Tr}}
\DeclareMathOperator{\identity}{\mathbb{I}}
\DeclarePairedDelimiterX{\norm}[1]{\lVert}{\rVert}{\ifblank{#1}{\:\cdot\:}{#1}}
\DeclarePairedDelimiterXPP{\pnorm}[2]{}{\lVert}{\rVert}{\ifblank{#2}{_{L^{2}}}{_{L^{#2}}}}{\ifblank{#1}{\:\cdot\:}{#1}}
\DeclarePairedDelimiterX{\innerprod}[2]{\langle}{\rangle}{#1,\,#2}

\let\arrow\vec
\renewcommand{\vec}[1]{\bm{#1}}
\newcommand{\mat}[1]{\bm{\mathsf{#1}}} % \mathbf{} \uppercase{}

% \newcommand{\Scalar}[1]{#1}
% \newcommand{\Vector}[1]{\vec{#1}}
% \newcommand{\Matrix}[1]{\bm{#1}}
\newcommand{\T}[0]{^{T}\!}
\newcommand{\Transpose}[1]{\matrix{#1}\T}
\newcommand{\CT}[0]{^{\dag}}
\newcommand{\ConjugateTranpose}[1]{\matrix{#1}\CT}


%
%  Calculus
%

% TODO : custom \derive & \pderive environments... or just import the *entire* `physics.sty` just for derivatives... ยก!
% https://tex.stackexchange.com/questions/29179/partial-derivative-macro
% https://tex.stackexchange.com/questions/22076/can-i-have-a-flexible-partial-derivative-macro
% https://tex.stackexchange.com/questions/26680/followup-regarding-flexible-partial-derivative-macros
% https://tex.stackexchange.com/questions/101092/an-even-more-flexible-derivative-macro/101109

\newcommand{\deriv}[1]{\frac{\mathrm{d}}{\mathrm{d}x} (#1)}
\newcommand{\pderiv}[2]{\frac{\partial}{\partial\ #1} (#2)}


%
%  Physics
%
\newcommand{\uvec}[1]{\bm{\hat{\textbf{#1}}}}
\newcommand{\ivec}{\uvec{\i}}
\newcommand{\jvec}{\uvec{\j}}
\newcommand{\kvec}{\uvec{k}}


%
%  Probability Theory
%
\newcommand{\indep}{\bm{\mathbin{\mathlarger{\perp}}}}
\newcommand{\condindep}{\bm{\mathbin{\mathlarger{\dperp}}}}

\DeclareMathOperator{\pdf}{f} % TODO
\DeclareMathOperator{\pmf}{p} % TODO
\DeclareMathOperator{\cdf}{F} % TODO

\DeclareMathOperator{\probability}{\mathbf{P}}
\DeclareMathOperator{\expectation}{\mathbb{E}}
\DeclareMathOperator{\variance}{\mathrm{Var}}
\DeclareMathOperator{\covariance}{\mathrm{Cov}}
\DeclareMathOperator{\bias}{\mathrm{Bias}}

% TODO Prob TODO

% \renewcommand{\given}[1]{\mleft. \vphantom{##1} \;\bm{\mathord{\mathlarger{\middle\vert}}}\; \vphantom{##1} \mright.}
%\newcommand{\prob}[1]{\probability \bm{\mleft\lparen\vphantom{#1}\mright.} #1 \bm{\mleft.\vphantom{#1}\mright\rparen}}
\newcommand{\Prob}[1]{\probability \bm{\mathord{\mathlarger{\mleft\lparen\vphantom{#1}\mright.}}} #1 \bm{\mathord{\mathlarger{\mleft.\vphantom{#1}\mright\rparen}}}}
\newcommand{\Exp}[1]{\expectation \mathord{\mathlarger{\mleft\lbrack\vphantom{#1}\mright.}} #1 \mathord{\mathlarger{\mleft.\vphantom{#1}\mright\rbrack}}}
\newcommand{\Var}[1]{\variance \mathord{\mathlarger{\mleft\lparen\vphantom{#1}\mright.}} #1 \mathord{\mathlarger{\mleft.\vphantom{#1}\mright\rparen}}}
\newcommand{\Cov}[1]{\covariance \mathord{\mathlarger{\mleft\lparen\vphantom{#1}\mright.}} #1 \mathord{\mathlarger{\mleft.\vphantom{#1}\mright\rparen}}}
\newcommand{\Bias}[1]{\bias \mathord{\mathlarger{\mleft\lparen\vphantom{#1}\mright.}} #1 \mathord{\mathlarger{\mleft.\vphantom{#1}\mright\rparen}}}

\newcommandx{\PDF}[3][1=f, 3=X]{{#1}_{#3} \parens*{#2}} % TODO
\newcommandx{\PMF}[3][1=p, 3=X]{{#1}_{#3} \parens*{#2}} % TODO
\newcommandx{\CDF}[3][1=F, 3=X]{{#1}_{#3} \parens*{#2}} % TODO

% \NewDocumentCommand{\dist}{}{} % TODO TODO TODO
%
%
% %
% %  Discrete Univariate Distributions
% %
% \DeclareMathOperator*{\@macros@distributions@bernoulli@name}{\textrm{Bern}}
% \DeclareMathOperator*{\@macros@distributions@binomial@name}{\textrm{Bin}}
% \DeclareMathOperator*{\@macros@distributions@geometric@name}{\textrm{Geom}}
% \DeclareMathOperator*{\@macros@distributions@negativebinomial@name}{\textrm{NBin}}
% \DeclareMathOperator*{\@macros@distributions@hypergeometric@name}{\textrm{HGeom}}
% \DeclareMathOperator*{\@macros@distributions@poisson@name}{\textrm{Pois}}
% \DeclareMathOperator*{\@macros@distributions@categorical@name}{\textrm{Cat}}
% %\DeclareMathOperator*{\@macros@distributions@<>@name}{\textrm{}}
%
% \newcommandx{\@macros@distributions@bernoulli@distribution}[][]{} % TODO
% \newcommandx{\@macros@distributions@binomial@distribution}[2][1=n, 2=p]{ \@macros@distributions@binomial@name \parens*{ #1,\, #2 } }
% \newcommandx{\@macros@distributions@geometric@distribution}[1][1=p]{ \@macros@distributions@geometric@name \parens*{ #1 } }
% \newcommandx{\@macros@distributions@negativebinomial@distribution}[2][1=r, 2=p]{ \@macros@distributions@negativebinomial@name \parens*{ #1,\, #2 } }
% \newcommandx{\@macros@distributions@hypergeometric@distribution}[3][1=r, 2=n, 3=N]{ \@macros@distributions@hypergeometric@name \parens*{ #1,\, #2,\, #3 } }
% \newcommandx{\@macros@distributions@poisson@distribution}[1][1=\lambda]{ \@macros@distributions@poisson@name \parens*{ #1 } }
% \newcommandx{\@macros@distributions@categorical@distribution}[1][]{ \@macros@distributions@categorical@name \parens*{ } } % TODO
% %\\newcommandx{\@macros@distributions@<>@distribution}[][]{ \@macros@distributions@<>@name \parens*{ } }
%
% \newcommandx{\@macros@distributions@bernoulli@pmf}[1][]{} % TODO
% \newcommandx{\@macros@distributions@binomial@pmf}[3][1=n, 2=p, 3=y]{ \choose{#1}{#3} {#2}^{#3} {\left\lparen 1 - #2 \right\rparen}^{#1-#3} }
% \newcommandx{\@macros@distributions@geometric@pmf}[2][1=p, 2=y]{ #1 {\left\lparen 1 - #1 \right\rparen}^{#2 - 1} }
% \newcommandx{\@macros@distributions@negativebinomial@pmf}[3][1=r, 2=p, 3=y]{ \choose{#3 - 1}{#1 - 1} {#2}^{#1} {\left\lparen 1 - #2 \right\rparen}^{#3 - #1} }
% \newcommandx{\@macros@distributions@hypergeometric@pmf}[4][1=r, 2=n, 3=N, 4=k]{ \frac{ \choose{#1}{#4} \choose{#3 - #1}{#2 - #4} }{ \choose{#3}{#2} } }
% \newcommandx{\@macros@distributions@poisson@pmf}[2][1=\lambda, 2=y]{ \frac{ {#1}^{#2} e^{-#1} }{ {#2}! } }
% \newcommandx{\@macros@distributions@categorical@pmf}[1][]{} % TODO
% %\newcommandx{\@macros@distributions@<>@pmf}[1][]{}
%
% \newcommandx{\@macros@distributions@bernoulli@expectation}[1][]{} % TODO
% \newcommandx{\@macros@distributions@binomial@expectation}[2][1=n, 2=p]{ #1#2 }
% \newcommandx{\@macros@distributions@geometric@expectation}[1][1=p]{ \frac{1}{#1} }
% \newcommandx{\@macros@distributions@negativebinomial@expectation}[2][1=r, 2=p]{ \frac{#1}{#2} }
% \newcommandx{\@macros@distributions@hypergeometric@expectation}[3][1=r, 2=n, 3=N]{ \frac{#2#1}{#3} }
% \newcommandx{\@macros@distributions@poisson@expectation}[1][1=\lambda]{ #1 }
% \newcommandx{\@macros@distributions@categorical@expectation}[1][]{} % TODO
% %\newcommandx{\@macros@distributions@<>@expectation}[1][]{}
%
% \newcommandx{\@macros@distributions@bernoulli@variance}[1][]{} % TODO
% \newcommandx{\@macros@distributions@binomial@variance}[2][1=n, 2=p]{ #1#2 {\left\lparen 1 - #2 \right\rparen} }
% \newcommandx{\@macros@distributions@geometric@variance}[1][1=p]{ \frac{1 - #1}{{#1}^{2}} }
% \newcommandx{\@macros@distributions@negativebinomial@variance}[2][1=r, 2=p]{ \frac{ #1{\lparen1 - #2\rparen} }{ {#2}^{2} } }
% \newcommandx{\@macros@distributions@hypergeometric@variance}[3][1=r, 2=n, 3=N]{ {\left\lparen#2\right\rparen} {\left\lparen\frac{#1}{#3}\right\rparen} {\left\lparen\frac{#3 - #1}{#3}\right\rparen} {\left\lparen\frac{#3 - #2}{#3 - 1}\right\rparen} }
% \newcommandx{\@macros@distributions@poisson@variance}[1][1=\lambda]{ #1 }
% \newcommandx{\@macros@distributions@categorical@variance}[1][]{} % TODO
% %\newcommandx{\@macros@distributions@<>@variance}[1][]{}
%
% \newcommandx{\@macros@distributions@bernoulli}[1][]{} % TODO
% \newcommandx{\@macros@distributions@binomial}[1][]{} % TODO
% \newcommandx{\@macros@distributions@geometric}[1][]{} % TODO
% \newcommandx{\@macros@distributions@negativebinomial}[1][]{} % TODO
% \newcommandx{\@macros@distributions@hypergeometric}[1][]{} % TODO
% \newcommandx{\@macros@distributions@poisson}[1][]{} % TODO
% \newcommandx{\@macros@distributions@categorical}[1][]{} % TODO
% %\newcommandx{@macros@distributions@<>}[1][]{}
%
%
% %
% %  Discrete Multivariate Distributions
% %
% \DeclareMathOperator*{\@macros@distributions@multinomial@name}{\textrm{Mult}}
% %\DeclareMathOperator*{\@macros@distributions@<>@name}{\textrm{}}
%
% \newcommandx{\@macros@distributions@multinomial@distribution}[3][1=1, 2=\theta, 3=k]{ \@macros@distributions@multinomial@name \parens*{ } } % TODO
% %\\newcommandx{\@macros@distributions@<>@distribution}[][]{ \@macros@distributions@<>@name \parens*{ } }
%
% \newcommandx{\@macros@distributions@multinomial@pmf}[4][1=1, 2=\theta, 3=k]{} % TODO
% %\newcommandx{\@macros@distributions@<>@pmf}[1][]{}
%
% \newcommandx{\@macros@distributions@multinomial@expectation}[4][1=1, 2=\theta, 3=k]{} % TODO
% %\newcommandx{\@macros@distributions@<>@expectation}[1][]{}
%
% \newcommandx{\@macros@distributions@multinomial@variance}[4][1=1, 2=\theta, 3=k]{} % TODO
% %\newcommandx{\@macros@distributions@<>@variance}[1][]{}
%
% \newcommandx{\@macros@distributions@multinomial}[4][1=1, 2=\theta, 3=k]{} % TODO
% %\newcommandx{@macros@distributions@<>}[1][]{}
%
%
% %
% %  Continuous Univariate Distributions
% %
% \DeclareMathOperator*{\@macros@distributions@normal@name}{\mathcal{N}}
% \DeclareMathOperator*{\@macros@distributions@uniform@name}{\textrm{Unif}}
% \DeclareMathOperator*{\@macros@distributions@exponential@name}{\textrm{Expo}}
% \DeclareMathOperator*{\@macros@distributions@gamma@name}{\textrm{Gamma}}
% \DeclareMathOperator*{\@macros@distributions@beta@name}{\textrm{Beta}}
% \DeclareMathOperator*{\@macros@distributions@chisquare@name}{\chi^2}
% \DeclareMathOperator*{\@macros@distributions@student@name}{\textrm{Stu}}
% \DeclareMathOperator*{\@macros@distributions@weibull@name}{\textrm{Wbl}}
% %\DeclareMathOperator*{\@macros@distributions@<>@name}{\textrm{}}
%
% \newcommandx{\@macros@distributions@normal@distribution}[2][1=\mu, 2=\sigma^2]{ \@macros@distributions@normal@name \parens*{ #1,\, #2 } }
% \newcommandx{\@macros@distributions@uniform@distribution}[2][1=\theta_1, 2=\theta_2]{ \@macros@distributions@uniform@name \parens*{ #1,\, #2 } }
% \newcommandx{\@macros@distributions@exponential@distribution}[1][1=\lambda]{ \@macros@distributions@exponential@name \parens*{ #1 } }
% \newcommandx{\@macros@distributions@gamma@distribution}[2][1=\alpha, 2=\beta]{ \@macros@distributions@gamma@name \parens*{ #1,\, #2 } }
% \newcommandx{\@macros@distributions@beta@distribution}[2][1=\alpha, 2=\beta]{ \@macros@distributions@beta@name \parens*{ #1,\, #2 } }
% \newcommandx{\@macros@distributions@chisquare@distribution}[1][1=\varv]{ \@macros@distributions@chisquare@name_{#1} }
% \newcommandx{\@macros@distributions@student@distribution}[1][1=n]{ \@macros@distributions@student@name \parens*{ #1 } % TODO
% \newcommandx{\@macros@distributions@weibull@distribution}[1][]{ \@macros@distributions@weibull@name \parens*{ } } % TODO
% % \newcommandx{\@macros@distributions@<>@distribution}[][]{ \@macros@distributions@<>@name \parens*{ } }
%
% \newcommandx{\@macros@distributions@normal@cdf}[3][1=\mu, 2=\sigma^2, 3=x]{ \frac{1}{\sqrt{2\pi#2}} \exp {\left\lbrace \frac{ -{\left\lparen#3 - #1\right\rparen}^{2} }{ 2#2 } \right\rbrace} }
% \newcommandx{\@macros@distributions@uniform@cdf}[3][1=\theta_1, 2=\theta_2, 3=x]{ \frac{1}{#2 - #1} }
% \newcommandx{\@macros@distributions@exponential@cdf}[2][1=\lambda, 2=x]{ #1 e^{-#1#2} }
% \newcommandx{\@macros@distributions@gamma@cdf}[3][1=\alpha, 2=\beta, 3=x]{ {\left\lbrack \frac{1}{\Gamma(#1) {#2}^{#1} } \right\rbrack} {#3}^{#1 - 1} e^{\sfrac{-#3}{#2} } }
% \newcommandx{\@macros@distributions@beta@cdf}[3][1=\alpha, 2=\beta, 3=y]{ {\left\lbrack \frac{\Gamma(#1 + #2)}{\Gamma(#1) \Gamma(#2)} \right\rbrack} {#3}^{#1 - 1} {\left\lparen 1 - #3 \right\rparen}^{#2 - 1} }
% \newcommandx{\@macros@distributions@chisquare@cdf}[2][1=\varv, 2=y]{ \frac{ {#2}^{(\sfrac{#1}{2})-1} e^{\sfrac{-#2}{2}} }{ 2^{\sfrac{#1}{2}} \Gamma(\sfrac{#1}{2}) } }
% \newcommandx{\@macros@distributions@student@cdf}[1][]{} % TODO
% \newcommandx{\@macros@distributions@weibull@cdf}[1][]{} % TODO
% %\newcommandx{\@macros@distributions@<>@cdf}[1][]{}
%
% \newcommandx{\@macros@distributions@normal@expectation}[2][1=\mu, 2=\sigma^2]{ #1 }
% \newcommandx{\@macros@distributions@uniform@expectation}[2][1=\theta_1, 2=\theta_2]{ \frac{#1 + #2}{2} }
% \newcommandx{\@macros@distributions@exponential@expectation}[1][1=\lambda]{ \frac{1}{#1} }
% \newcommandx{\@macros@distributions@gamma@expectation}[2][1=\alpha, 2=\beta]{ #1#2 }
% \newcommandx{\@macros@distributions@beta@expectation}[2][1=\alpha, 2=\beta]{ \frac{#1}{#1 + #2} }
% \newcommandx{\@macros@distributions@chisquare@expectation}[1][1=\varv]{ #1 }
% \newcommandx{\@macros@distributions@student@expectation}[1][]{} % TODO
% \newcommandx{\@macros@distributions@weibull@expectation}[1][]{} % TODO
% %\newcommandx{\@macros@distributions@<>@expectation}[1][]{}
%
% \newcommandx{\@macros@distributions@normal@variance}[2][1=\mu, 2=\sigma^2]{ #2 }
% \newcommandx{\@macros@distributions@uniform@variance}[2][1=\theta_1, 2=\theta_2]{} % TODO
% \newcommandx{\@macros@distributions@exponential@variance}[2][1=\lambda]{ \frac{1}{{#1}^{2}} }
% \newcommandx{\@macros@distributions@gamma@variance}[2][1=\alpha, 2=\beta]{ #1{#2}^{2}}
% \newcommandx{\@macros@distributions@beta@variance}[2][1=\alpha, 2=\beta]{ \frac{#1#2}{ {\left\lparen #1 + #2 \right\rparen}^{2} {\left\lparen #1 + #2 + 1 \right\rparen} } }
% \newcommandx{\@macros@distributions@chisquare@variance}[1][1=\varv]{ 2#1 }
% \newcommandx{\@macros@distributions@student@variance}[1][]{} % TODO
% \newcommandx{\@macros@distributions@weibull@variance}[1][]{} % TODO
% %\newcommandx{\@macros@distributions@<>@variance}[1][]{}
%
% \newcommandx{\@macros@distributions@normal}[3][1=\mu, 2=\sigma^2]{} % TODO
% \newcommandx{\@macros@distributions@uniform}[3][1=\theta_1, 2=\theta_2]{} % TODO
% \newcommandx{\@macros@distributions@exponential}[2][1=\lambda]{} % TODO
% \newcommandx{\@macros@distributions@gamma}[3][1=\alpha, 2=\beta]{} % TODO
% \newcommandx{\@macros@distributions@beta}[3][1=\alpha, 2=\beta]{} % TODO
% \newcommandx{\@macros@distributions@chisquare}[2][1=?]{} % TODO
% \newcommandx{\@macros@distributions@student}[2][]{1=?} % TODO
% \newcommandx{\@macros@distributions@weibull}[2][1=?]{} % TODO
% %\newcommandx{\@macros@distributions@<>}[1][]{}
%
%
% %
% %  Continuous Multivariate Distributions
% %
% %\DeclareMathOperator*{@macros@distributions@<>@name}{\textrm{}}
%
% %\\newcommandx{\@macros@distributions@<>@distribution}[][]{ \@macros@distributions@<>@name \parens*{ } }
%
% %\newcommandx{\@macros@distributions@<>@cdf}[1][]{}
%
% %\newcommandx{\@macros@distributions@<>@expectation}[1][]{}
%
% %\newcommandx{\@macros@distributions@<>@variance}[1][]{}
%
% %\newcommandx{\@macros@distributions@<>}[1][]{}


%
%  Statistical Estimation
%
\newcommand{\mean}{\bar}
\newcommand{\widemean}{\overline}
\newcommand{\median}{\tilde}
\newcommand{\widemedian}{\widetilde}
\newcommand{\estimate}[1]{\hat{#1}}
\newcommand{\optimal}[1]{#1^{\ast}} % \varhexstar
\newcommand{\param}[1]{\mathord{\mathsmaller{\mathrm{#1}}}}
\newcommand{\randvar}[1]{\mathord{\mathlarger{\mathsf{#1}}}}
\newcommand{\mle}{\mathrm{MLE}}
\newcommand{\map}{\mathrm{MAP}}
\newcommand{\MLE}[1]{#1_{\mle}}
\newcommand{\MAP}[1]{#1_{\map}}


%
%  Information Theory
%
\DeclareMathOperator{\information}{\mathbf{I}}
\DeclareMathOperator{\entropy}{\mathbf{H}}

% TODO Entropy TODO
% \Information{I}(E) = \log_2 \frac{1}{\Prob{E}}
\newcommand{\Information}[1]{\information \bm{\mathord{\mathlarger{\mleft\lparen\vphantom{#1}\mright.}}} #1 \bm{\mathord{\mathlarger{\mleft.\vphantom{#1}\mright\rparen}}}}
\newcommand{\Entropy}[1]{\entropy \bm{\mathord{\mathlarger{\mleft\lbrack\vphantom{#1}\mright.}}} #1 \bm{\mathord{\mathlarger{\mleft.\vphantom{#1}\mright\rbrack}}}}


%
%  Learning Theory
%
\newcommand{\loss}{\mathord{\raisebox{-0.3ex}{$\mathlarger{\mathlarger{\ell}}$}}}
\newcommand{\risk}{R}


%
%  Optimization
%
\DeclareMathOperator*{\maximize}{\mathrm{maximize}}
\DeclareMathOperator*{\minimize}{\mathrm{minimize}}
\DeclareMathOperator*{\subjectto}{\mathrm{subject}\ \mathrm{to}}
\DeclareMathOperator*{\argmax}{\arg\max}
\DeclareMathOperator*{\argmin}{\arg\min}


%
%  Convex Optimization
%
\DeclareMathOperator*{\convex}{\mathrm{convex}}
\DeclareMathOperator*{\concave}{\mathrm{concave}}
%\DeclareMathOperator*{}{}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                                symbols                                %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%
%  I dislike the default abbreviation of infinity...
%
\newcommand{\infinity}{\infty}
\newcommand{\posinf}{\mathord{{+}\infty}}
\newcommand{\neginf}{\mathord{{-}\infty}}

%
%  better qed symbol
%
\renewcommand{\qedsymbol}{$\blacksquare$}

%
%  hollow colon
%
\newcommand{\texthollowcolon}{%
  \ensurestackMath{\stackon[1.5ex]{\circ}{\circ}}}
\newcommand{\hollowcolon}{%
  \savestack\Tmp{\raisebox{-.7pt}{$\texthollowcolon$}}%
  \dp\Tmpcontent=\dimexpr\dp\Tmpcontent-.7pt\relax%
  \mathrel{\scalerel*{\Tmp}{:}}}

%
%  ? seriously what the hell is this...
%
\newcommand{\cpm}{\mathbin{\mathpalette\@cpm\relax}}
\newcommand{\@cpm}[2]{\ooalign{%
  \raisebox{.1\height}{$#1+$}\cr
  \smash{\raisebox{-.6\height}{$#1-$}}\cr}}


% %
% %  attempt at augmented matrix
% %
% \renewcommand*\env@matrix[1][*\c@MaxMatrixCols\ c]{%
% \hskip -\arraycolsep\
% \let\@ifnextchar\new@ifnextchar\
% \array{#1}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                                fonts                                  %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
%  import v symbol from txfonts (\mathnormal{v} looks like \mathnormal{u}...)
%
\DeclareSymbolFont{matha}{OML}{txmi}{m}{it}% txfonts
\DeclareMathSymbol{\varv}{\mathord}{matha}{118}


%
%  import double stroke \perp symbol from txfonts
%
\DeclareSymbolFont{symbolsC}{U}{txsyc}{m}{n}
\SetSymbolFont{symbolsC}{bold}{U}{txsyc}{bx}{n}
\DeclareFontSubstitution{U}{txsyc}{m}{n}
\DeclareMathSymbol{\dperp}{\mathrel}{symbolsC}{121}


%
%  lowercase mathcal font
%
\newcommand{\smallmathcal}[1]{%
  \mathchoice
    {{\scriptstyle\mathcal{\uppercase{#1}}}} % \displaystyle
    {{\scriptstyle\mathcal{\uppercase{#1}}}} % \textstyle
    {{\scriptscriptstyle\mathcal{\uppercase{#1}}}} % \scriptstyle
    {\scalebox{.7}{\(\scriptscriptstyle\mathcal{\uppercase{#1}}\)}} % \scriptscriptstyle
}


%
%  math font abbreviations
%
\newcommand{\mbf}[1]{\mathbf{#1}}
\newcommand{\mbb}[1]{\mathbb{#1}}
\newcommand{\mcal}[1]{\ifthenelse{\isin{#1}{AรBCรDEFGฤHIฤฐรJKLMNOรรPRSลTUรรVYZ}}{\mathcal{#1}}{\smallmathcal{#1}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                               functions                               %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
%  switch statement implementation
%
\newcommand{\ifequals}[3]{\ifthenelse{\equal{#1}{#2}}{#3}{}}
\newcommand{\caseof}[2]{#1 #2}
\newenvironment{switch}[1]{\renewcommand{\caseof}{\ifequals{#1}}}{}


%
% sequence generator [SEP] {LIST} [FUNC]
%
\newcommandx*{\mkseq}[3][1=\, , 3=\idfunc]{%
	\foreach \elem [count=\i] in {#2} {%
		\ifnum\i=1%
			#3{\elem}%
		\else%
			#1 #3{\elem}%
		\fi%
	}%
}%


% ah... TeX... `impossible` to debug...

% %
% % range generator [START] {VAR} [STOP] [SKIPABOVE]
% %       usage:
% %          -  \mkseq[SKIPABOVE]{\mkrange[START]{VAR}[STOP]}[SEP][FUNC]
% %
% \newcommandx*{\@macros@mkrange@body}[4][]{%
%   \foreach \elem [count=\i] in {#1,...,\@macros@mkrange@above} {%
%     \ifnum\i = 1%
%       #2_{\elem}%
%     \else%
%       \ifnum\i = #4%
%         \ifthenelse{\boolean{@macros@mkrange@tail}}{%
%           \, #2_{\elem) \, \ldots \, #2_{#3}%
%         }{%
%           \, #2_{\elem}%
%         }%
%       \else%
%         \, #2_{\elem}%
%       \fi%
%     \fi%
%   }%
% }%
% \newcommandx*{\mkrange}[4][1=1 , 3=n, 4=2]{%
%   \IfInteger{#1}{% START = INT
%     \IfInteger{#4}{% SKIPABOVE = INT
%       \def\@macros@mkrange@above{\xintexpr #1 + #4\relax}%
%       \newboolean{@macros@mkrange@tail}
%       \setboolean{@macros@mkrange@tail}{true}
%       \IfInteger{#3}{% STOP = INT
%         \ifthenelse{#1 > #3}{% START > STOP
%           \PackageError{preamble}{mkrange.START = '#1' > mkrange.STOP = '#3'}\@ehc%
%         }{%
%           \ifthenelse{#1 = #3}{% START = STOP
%             #2_{#1}%
%           }{% START < STOP
%             \ifthenelse{#4 = #3}{% SKIPABOVE = STOP
%               \boolean{@macros@mkrange@tail}{false}
%               \@macros@mkrange@body{#1}{#2}{#4}{#3}%
%             }{%
%               \ifthenelse{#4 < #3}{% SKIPABOVE < STOP
%                 \@macros@mkrange@body{#1}{#2}{#4}{#3}%
%               }{% SKIPABOVE > STOP
%                 \PackageError{preamble}{mkrange.SKIPABOVE = '#4' < mkrange.STOP = '#3'}\@ehc%
%               }%
%             }%
%           }%
%         }%
%       }{% STOP != INT
%         \ifthenelse{#4 < #1}{% START > SKIPABOVE
%           \PackageError{preamble}{mkrange.SKIPABOVE = '#4' < mkrange.START = '#1'}\@ehc%
%         }{% START <= SKIPABOVE,  STOP != INT
%           \@macros@mkrange@body{#1}{#2}{#4}{#3}
%         }%
%       }%
%     }{\PackageError{preamble}{mkrange.SKIPABOVE = '#4' is not an Integer}\@ehc}%
%   }{\PackageError{preamble}{mkrange.START = '#1' is not an Integer}\@ehc}%
% }%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                              environments                             %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
%  cases
%
\newenvironment{case}[1]{\left\lbrace\begin{array}{lr}#1}{\end{array}\right\rbrace}


%
% Create dashed box Environment (`\dashbox` namespace taken by `dashbox.sty`)
%
\newenvironment{dashedbox}%
	{%
    \ \\
		\begin{adjustbox}{minipage=0.85\textwidth,precode=\dbox}
	}{%
		\end{adjustbox}
	}%


%
% Create boxedSolution Environment
%
\newenvironment{dashedboxSolution}%
  {%
    \\
    \begin{solution}
    \\
    \begin{adjustbox}{minipage=.85\textwidth,precode=\dbox}
  }{%
    \end{adjustbox}
    \end{solution}
  }%


%
% Create boxedProof Environment
%
\newenvironment{dashedboxProof}%
  {%
    \begin{adjustbox}{minipage=.85\textwidth,precode=\dbox}
    \begin{proof}
  }{%
    \end{proof}
    \end{adjustbox}
  }%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                             SML Pseudocode                            %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newdimen\zzsize
\zzsize=11pt
\newdimen\kwsize
\kwsize=11pt

\newcommand{\basicstyle}{\fontsize{\zzsize}{1.1\zzsize}\ttfamily}
\newcommand{\keywordstyle}{\fontsize{\kwsize}{1.1\kwsize}\normalfont\bf}
\newlength{\zzlstwidth}
\settowidth{\zzlstwidth}{{\basicstyle~}}
\newcommand{\lcm}{}

\lstset{%
  xleftmargin=5.0ex,
  basewidth=\zzlstwidth,
  basicstyle=\basicstyle,
  captionpos=b,
  numbers=left, numberstyle=\small, numbersep=8pt,
  keywordstyle=\keywordstyle,
  keywords={signature,sig,structure,struct,function,fun,fn,case,of,type,datatype,let,val,fn,in,end,as,functor,alloc,if,then,else,while,with,and,start,do},
  commentstyle=\rmfamily\slshape,
  morecomment=[l]{\%},
  lineskip={1.5pt},
  columns=[l]fullflexible,
  keepspaces=true,
  mathescape=true,
  escapeinside={@}{@},
% NOTE: need TWO sets of braces around each definition below!
  literate={requires}{{$\lcm\text{\keywordstyle \% requires}$}}6
           {returns}{{$\lcm\text{\keywordstyle \% returns}$}}6
           {=}{{$\lcm=$}}2
           {(}{{$($}}2
           {)}{{$)$}}2
           {**}{{$\lcm\times$}}2
%           {||}{{$\lcm\Vert$}}2
           {|}{{$|$}}2
           {=>}{{$\lcm\boldsymbol\Rightarrow$}}2
           {->}{{$\lcm\rightarrow$}}2
           {'a}{{$\alpha$}}1
           {'b}{{$\beta$}}1
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
