% \RequirePackage{amsmath, amsthm, amssymb, amsfonts}
% \RequirePackage{xifthen, xparse, xargs, xfrac, xstring}
% \RequirePackage{dashbox, adjustbox, fancybox}
% \RequirePackage{mathtools}
% \RequirePackage{listings} % does this need to be included just before the listings section?
% % \RequirePackage{gensymb}
% % \RequirePackage{enumerate, enumitem}
% % \RequirePackage{extramarks}
% % \RequirePackage{linegoal}
% % \RequirePackage{graphicx}
% % \RequirePackage{fancyhdr}
% % \RequirePackage{longtable}
% % \RequirePackage{float}
% % \RequirePackage{tikz}
% % \RequirePackage{pstricks}
% % \RequirePackage{pgffor}
% % \RequirePackage{xintexpr}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                                 letters                               %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\Rn{\mathbb{R}^{n}}
\def\Rm{\mathbb{R}^{m}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                           custom functions                            %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
% switch statement implementation
%
\newcommand{\ifequals}[3]{\ifthenelse{\equal{#1}{#2}}{#3}{}}
\newcommand{\caseof}[2]{#1 #2}
\newenvironment{switch}[1]{\renewcommand{\caseof}{\ifequals{#1}}}{}

%
% sequence generator [SEP] {LIST} [FUNC]
%
\newcommandx*{\mkseq}[3][1=\, , 3=\idfunc]{%
	\foreach \elem [count=\i] in {#2} {%
		\ifnum\i=1%
			#3{\elem}%
		\else%
			#1 #3{\elem}%
		\fi%
	}%
}%

% %
% % range generator [START] {VAR} [STOP] [SKIPABOVE]
% %       usage:
% %          -  \mkseq[SKIPABOVE]{\mkrange[START]{VAR}[STOP]}[SEP][FUNC]
% %
% \newcommandx*{\@preamble@mkrange@body}[4][]{%
%   \foreach \elem [count=\i] in {#1,...,\@preamble@mkrange@above} {%
%     \ifnum\i = 1%
%       #2_{\elem}%
%     \else%
%       \ifnum\i = #4%
%         \ifthenelse{\boolean{@preamble@mkrange@tail}}{%
%           \, #2_{\elem) \, \ldots \, #2_{#3}%
%         }{%
%           \, #2_{\elem}%
%         }%
%       \else%
%         \, #2_{\elem}%
%       \fi%
%     \fi%
%   }%
% }%
% \newcommandx*{\mkrange}[4][1=1 , 3=n, 4=2]{%
%   \IfInteger{#1}{% START = INT
%     \IfInteger{#4}{% SKIPABOVE = INT
%       \def\@preamble@mkrange@above{\xintexpr #1 + #4\relax}%
%       \newboolean{@preamble@mkrange@tail}
%       \setboolean{@preamble@mkrange@tail}{true}
%       \IfInteger{#3}{% STOP = INT
%         \ifthenelse{#1 > #3}{% START > STOP
%           \PackageError{preamble}{mkrange.START = '#1' > mkrange.STOP = '#3'}\@ehc%
%         }{%
%           \ifthenelse{#1 = #3}{% START = STOP
%             #2_{#1}%
%           }{% START < STOP
%             \ifthenelse{#4 = #3}{% SKIPABOVE = STOP
%               \boolean{@preamble@mkrange@tail}{false}
%               \@preamble@mkrange@body{#1}{#2}{#4}{#3}%
%             }{%
%               \ifthenelse{#4 < #3}{% SKIPABOVE < STOP
%                 \@preamble@mkrange@body{#1}{#2}{#4}{#3}%
%               }{% SKIPABOVE > STOP
%                 \PackageError{preamble}{mkrange.SKIPABOVE = '#4' < mkrange.STOP = '#3'}\@ehc%
%               }%
%             }%
%           }%
%         }%
%       }{% STOP != INT
%         \ifthenelse{#4 < #1}{% START > SKIPABOVE
%           \PackageError{preamble}{mkrange.SKIPABOVE = '#4' < mkrange.START = '#1'}\@ehc%
%         }{% START <= SKIPABOVE,  STOP != INT
%           \@preamble@mkrange@body{#1}{#2}{#4}{#3}
%         }%
%       }%
%     }{\PackageError{preamble}{mkrange.SKIPABOVE = '#4' is not an Integer}\@ehc}%
%   }{\PackageError{preamble}{mkrange.START = '#1' is not an Integer}\@ehc}%
% }%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                           custom symbols                              %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
%  ??
%
%\makeatletter
\newcommand{\cpm}{\mathbin{\mathpalette\@cpm\relax}}
\newcommand{\@cpm}[2]{\ooalign{%
  \raisebox{.1\height}{$#1+$}\cr
  \smash{\raisebox{-.6\height}{$#1-$}}\cr}}
%\makeatother

%
%  custom cases
%
\newenvironment{case}[1]{\left\{\begin{array}{lr}#1}{\end{array}\right\}}

%
%  matrix
%
%\makeatletter
% \renewcommand*\env@matrix[1][*\c@MaxMatrixCols\ c]{%
%   \hskip -\arraycolsep\
%   \let\@ifnextchar\new@ifnextchar\
%   \array{#1}}
%\makeatother


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                             custom fonts                              %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\smallmathcal}[1]{
  \mathchoice
    {{\scriptstyle\mathcal{\uppercase{#1}}}} % \displaystyle
    {{\scriptstyle\mathcal{\uppercase{#1}}}} % \textstyle
    {{\scriptscriptstyle\mathcal{\uppercase{#1}}}} % \scriptstyle
    {\scalebox{.7}{\(\scriptscriptstyle\mathcal{\uppercase{#1}}\)}} % \scriptscriptstyle
}

\newcommand{\textdf}[1]{\textbf{\textsf{#1}}\index{#1}}
\newcommand{\mbf}[1]{\mathbf{#1}}
\newcommand{\mbb}[1]{\mathbb{#1}}
\newcommand{\mcal}[1]{\ifthenelse{\isin{#1}{AÂBCÇDEFGĞHIİÎJKLMNOÖÔPRSŞTUÜÛVYZ}}{\mathcal{#1}}{\smallmathcal{#1}}}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                           custom commands                             %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
%  General
%
%\ifdef{\part}{\renewcommand{\part}[1]{\vspace{.10in}{\bf (#1)}}}{}
\renewcommand{\part}[1]{\vspace{.10in}{\bf (#1)}}
\newcommand{\justif}[2]{&{#1}&\text{#2}}
\newcommand{\justifyy}[2]{&{#1}&#2}
\newcommand{\indentitem}{\setlength\itemindent{23mm}\setlength\hangindent{26mm}}
\newcommand{\question}[2]{\vspace{.25in} \hrule\vspace{0.5em}
\noindent{\normalfont\large\bfseries#1: #2} \vspace{0.5em}
\hrule \vspace{.10in}}
\newcommand{\solution}{\textbf{\normalsize\ Solution}}


%
%  Algorithms
%
\newcommand{\alg}[1]{\textsc{\bfseries \footnotesize #1}}

%
%  Basic Math
%

\newcommand{\lcase}{\left \{}
\newcommand{\rcase}{\right \}}
%\renewcommand{\log}[2][]{\operatorname{log}_{#1} #2}

%											% \set{}		--	normal
%  Sets								% \set*{}		--	delimiters adjust to size of content
%											% \set[\big]{}	--	manual adjustment as optional argument

% \DeclarePairedDelimiterX\set[1]\lbrace\rbrace{\setaux#1}
%  \def\setaux#1|{#1\;\delimsize\vert\;}

\DeclarePairedDelimiterX{\set}[1]{\{}{\}}{\setargs{#1}}
\NewDocumentCommand{\setargs}{>{\SplitArgument{1}{;}}m}
{\setargsaux#1}
\NewDocumentCommand{\setargsaux}{mm}
{\IfNoValueTF{#2}{#1} {#1\,\delimsize|\,\mathopen{}#2}}%{#1\:;\:#2}

\newcommand{\powerset}[1]{\mathcal{P}(#1)}
\newcommand{\cardinality}[1]{\left\vert#1\right\vert}

\newcommand{\suchthat}{\text{ s.t. }}
% \newcommand{\implies}{\Longrightarrow}

% \newcommand{\union}
% \newcommand{\intersection}
% \newcommand{\difference}


%
% Functions
%
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\renewcommand{\qedsymbol}{$\blacksquare$}

%
%  Combinatorics .
%
\newcommand{\kperm}[3]{
  \begin{switch}{#1}
    \caseof{rep}{\frac{#2!}{#2^{#3}\ (#2-#3)!}}
    \caseof{norep}{\frac{#2!}{(#2-#3)!}}
    \caseof{}{#2^{#3}}
  \end{switch}
}
\newcommand{\perm}[1]{#1!}
% \newcommand{\kperm}[2]{\frac{#1!}{(#1-#2)!}}
\newcommand{\kselect}[2]{\frac{#1!}{#2!\ (#1-#2)!}}
\renewcommand{\choose}[2]{\binom{#1}{#2}}

%
%  Probability
%
\newcommand{\Exp}[1]{\operatorname{\mathbf{E}}\left[#1\right]}
\newcommand{\Var}[1]{\operatorname{Var}\left[#1\right]}
\newcommand{\Cov}[1]{\operatorname{Cov}\left(#1\right)}
\newcommand{\Bias}{\operatorname{Bias}}
\newcommand{\Prob}[1]{\operatorname{\mathbf{P}}\left(#1\right)}
\newcommand{\pmf}[2]{\mathlarger{p}_{#1}\left(#2\right)}
\newcommand{\PMF}[1]{\mathcal{P}\left(\mkseq[\cap]{#1}[\set] \right)}

\newcommand{\MLE}{\rm MLE}
\newcommand{\MAP}{\rm MAP}

%
%  Statistics
%

% statistics: distributions
\newcommand{\Bern}{\textrm{Bern}}  % bernoulli
\newcommand{\Bin}{\textrm{Bin}}   % binomial
\newcommand{\Geom}{\textrm{Geom}}  % geometric
\newcommand{\NBin}{\textrm{NBin}}  % negative binomial
\newcommand{\HGeom}{} % hypergeometric
\newcommand{\Pois}{\textrm{Pois}} % poisson
\newcommand{\Unif}{\textrm{Unifo}}   % uniform
\newcommand{\Nor}{}  % normal
\newcommand{\Expo}{\textrm{Expo}}  % exponential
\newcommand{\Gamm}{\textrm{Gamma}} % gamma
\newcommand{\Beta}{\textrm{Beta}}  % beta
\newcommand{\LgNor}{} % log-normal
\newcommand{\ChiSq}{}   % chi-square
\newcommand{\Stu}{}   % student-t
\newcommand{\Wbl}{}   % weibull
\newcommand{\Mult}{\textrm{Mult}} % multinomial


%
%  Calculus
%
\newcommand{\deriv}[1]{\frac{\mathrm{d}}{\mathrm{d}x} (#1)}
\newcommand{\pderiv}[2]{\frac{\partial}{\partial\ #1} (#2)}
\newcommand{\dx}{\mathrm{d}x}

%
%  Linear Algebra
%
\newcommand{\abs}[1]{\left\vert#1\right\vert}
\newcommand{\norm}[1]{\left\Vert#1\right\Vert}
\newcommand{\pnorm}[2]{\left\Vert#1\right\Vert_{L^{#2}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%                          custom environments                          %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \newenvironment{boxed}%
% 	{%
%     \begin{adjustbox}{minipage=.85\textwidth,precode=\dbox}
% 	}{%
%     \end{adjustbox}
% 	}%

% %
% % Create boxed Environment
% %
% \newenvironment{boxed}%
% 	{%
% 		\begin{adjustbox}{minipage=0.85\textwidth,precode=\dbox}
% 	}{%
% 		\end{adjustbox}
% 	}%

%
% Create boxedSolution Environment
%
\newenvironment{boxedSolution}%
  {%
    \\
    \begin{solution}
    \\
    \begin{adjustbox}{minipage=.85\textwidth,precode=\dbox}
  }{%
    \end{adjustbox}
    \end{solution}
  }%

%
% Create boxedProof Environment
%
\newenvironment{boxedProof}%
  {%
    \begin{adjustbox}{minipage=.85\textwidth,precode=\dbox}
    \begin{proof}
  }{%
    \end{proof}
    \end{adjustbox}
  }%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%              LSTLISTINGS PACKAGE (for sml pseudocode)                 %%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \RequirePackage{listings}

\newdimen\zzsize
\zzsize=11pt
\newdimen\kwsize
\kwsize=11pt

\newcommand{\basicstyle}{\fontsize{\zzsize}{1.1\zzsize}\ttfamily}
\newcommand{\keywordstyle}{\fontsize{\kwsize}{1.1\kwsize}\normalfont\bf}
\newlength{\zzlstwidth}
\settowidth{\zzlstwidth}{{\basicstyle~}}
\newcommand{\lcm}{}

\lstset{
  xleftmargin=5.0ex,
  basewidth=\zzlstwidth,
  basicstyle=\basicstyle,
  captionpos=b,
  numbers=left, numberstyle=\small, numbersep=8pt,
  keywordstyle=\keywordstyle,
  keywords={signature,sig,structure,struct,function,fun,fn,case,of,type,datatype,let,val,fn,in,end,as,functor,alloc,if,then,else,while,with,and,start,do},
  commentstyle=\rmfamily\slshape,
  morecomment=[l]{\%},
  lineskip={1.5pt},
  columns=[l]fullflexible,
  keepspaces=true,
  mathescape=true,
  escapeinside={@}{@},
% NOTE: need TWO sets of braces around each definition below!
  literate={requires}{{$\lcm\text{\keywordstyle \% requires}$}}6
           {returns}{{$\lcm\text{\keywordstyle \% returns}$}}6
           {=}{{$\lcm=$}}2
           {(}{{$($}}2
           {)}{{$)$}}2
           {**}{{$\lcm\times$}}2
%           {||}{{$\lcm\Vert$}}2
           {|}{{$|$}}2
           {=>}{{$\lcm\boldsymbol\Rightarrow$}}2
           {->}{{$\lcm\rightarrow$}}2
           {'a}{{$\alpha$}}1
           {'b}{{$\beta$}}1
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%
% Tables
%
% \usepackage{array}
%
% \newcolumntype{M}[1]{>{$\displaystyle\qquad}p{#1}<{$}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
